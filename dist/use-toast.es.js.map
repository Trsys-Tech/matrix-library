{"version":3,"file":"use-toast.es.js","sources":["../src/components/toast/use-toast.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nimport { ToastVariant } from \"./toast-components\";\r\n\r\nconst toastParams = {\r\n  limit: 3,\r\n};\r\n\r\ntype ToastInfo = {\r\n  message: string;\r\n  variant: ToastVariant;\r\n};\r\n\r\nconst toasts = new Map<string, ToastInfo>();\r\nconst listener: { setState: React.Dispatch<React.SetStateAction<Map<string, ToastInfo>>> } = { setState: () => {} };\r\n\r\nconst addToast = (toast: ToastInfo) => {\r\n  if (toasts.size >= toastParams.limit) {\r\n    toasts.delete(toasts.keys().next().value!);\r\n  }\r\n\r\n  toasts.set(uuidv4(), toast);\r\n\r\n  listener.setState(new Map(toasts));\r\n\r\n  return toasts;\r\n};\r\n\r\nconst removeToast = (id: string) => {\r\n  toasts.delete(id);\r\n  listener.setState(new Map(toasts));\r\n};\r\n\r\ntype ToastFunction = {\r\n  (message: string): void;\r\n  success: (message: string) => void;\r\n  danger: (message: string) => void;\r\n  warning: (message: string) => void;\r\n  info: (message: string) => void;\r\n};\r\n\r\nconst toast: ToastFunction = (message: string) => addToast({ message, variant: \"default\" });\r\ntoast.success = (message: string) => addToast({ message, variant: \"success\" });\r\ntoast.danger = (message: string) => addToast({ message, variant: \"danger\" });\r\ntoast.warning = (message: string) => addToast({ message, variant: \"warning\" });\r\ntoast.info = (message: string) => addToast({ message, variant: \"info\" });\r\n\r\nconst useToasts = () => {\r\n  const [state, setState] = React.useState(toasts);\r\n\r\n  React.useEffect(() => {\r\n    listener.setState = setState;\r\n    return () => {\r\n      listener.setState = () => {};\r\n    };\r\n  }, [state]);\r\n\r\n  return { toast, toasts: state, addToast, removeToast };\r\n};\r\n\r\nexport { toast, useToasts, toastParams };\r\n"],"names":["toastParams","toasts","listener","addToast","toast","uuidv4","removeToast","id","message","useToasts","state","setState","React"],"mappings":";;AAOA,MAAMA,IAAc;AAAA,EAClB,OAAO;AACT,GAOMC,wBAAa,IAAA,GACbC,IAAuF,EAAE,UAAU,MAAM;AAAC,EAAA,GAE1GC,IAAW,CAACC,OACZH,EAAO,QAAQD,EAAY,SAC7BC,EAAO,OAAOA,EAAO,KAAA,EAAO,KAAA,EAAO,KAAM,GAG3CA,EAAO,IAAII,EAAA,GAAUD,CAAK,GAE1BF,EAAS,SAAS,IAAI,IAAID,CAAM,CAAC,GAE1BA,IAGHK,IAAc,CAACC,MAAe;AAClC,EAAAN,EAAO,OAAOM,CAAE,GAChBL,EAAS,SAAS,IAAI,IAAID,CAAM,CAAC;AACnC,GAUMG,IAAuB,CAACI,MAAoBL,EAAS,EAAE,SAAAK,GAAS,SAAS,WAAW;AAC1FJ,EAAM,UAAU,CAACI,MAAoBL,EAAS,EAAE,SAAAK,GAAS,SAAS,WAAW;AAC7EJ,EAAM,SAAS,CAACI,MAAoBL,EAAS,EAAE,SAAAK,GAAS,SAAS,UAAU;AAC3EJ,EAAM,UAAU,CAACI,MAAoBL,EAAS,EAAE,SAAAK,GAAS,SAAS,WAAW;AAC7EJ,EAAM,OAAO,CAACI,MAAoBL,EAAS,EAAE,SAAAK,GAAS,SAAS,QAAQ;AAEvE,MAAMC,IAAY,MAAM;AACtB,QAAM,CAACC,GAAOC,CAAQ,IAAIC,EAAM,SAASX,CAAM;AAE/CW,SAAAA,EAAM,UAAU,OACdV,EAAS,WAAWS,GACb,MAAM;AACX,IAAAT,EAAS,WAAW,MAAM;AAAA,IAAC;AAAA,EAC7B,IACC,CAACQ,CAAK,CAAC,GAEH,EAAE,OAAAN,GAAO,QAAQM,GAAO,UAAAP,GAAU,aAAAG,EAAA;AAC3C;"}